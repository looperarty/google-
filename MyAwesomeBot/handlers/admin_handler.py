# handlers/admin_handler.py

from aiogram import Router, F
from aiogram.types import Message
from aiogram.filters import Command

from config import ADMIN_ID
from database import get_total_users, get_daily_video_creations, get_daily_payments # <-- –û–±–Ω–æ–≤–∏–ª–∏ –∏–º–ø–æ—Ä—Ç—ã

router = Router()

@router.message(Command("admin"))
async def admin_panel_handler(message: Message) -> None:
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É /admin –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É."""
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
    if message.from_user.id != ADMIN_ID:
        return
    
    total_users = await get_total_users()
    daily_creations = await get_daily_video_creations()
    daily_payments = await get_daily_payments()
    
    stats_message = (
        "üìà **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**\n\n"
        f"üë• –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: **{total_users}**\n"
        f"üé¨ –ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è: **{daily_creations}**\n"
        f"üí≥ –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π –∑–∞ —Å–µ–≥–æ–¥–Ω—è: **{daily_payments}** –∫—Ä–µ–¥–∏—Ç–æ–≤"
    )
    
    await message.answer(stats_message)